# GoReleaser configuration for touhou-local-sync
version: 2

# Project metadata
project_name: thlocalsync

# Build configuration
builds:
  - id: windows-build
    main: ./cmd/thlocalsync
    binary: thlocalsync
    env:
      - CGO_ENABLED=0
    goos:
      - windows
    goarch:
      - amd64
      - arm64
    ldflags:
      - -s -w
      - -X main.version={{.Version}}
      - -X main.commit={{.Commit}}
      - -X main.date={{.Date}}

# Archive configuration
archives:
  - id: default
    name_template: >-
      {{ .ProjectName }}_
      {{- .Version }}_
      {{- .Os }}_
      {{- .Arch }}
    files:
      - README.md
      - LICENSE
      - NOTICE

# Checksum generation
checksum:
  name_template: 'checksums.txt'
  algorithm: sha256

# Changelog configurationï¼ˆ.github/release.ymlã‹ã‚‰ç§»è¡Œï¼‰
changelog:
  sort: asc
  use: github
  filters:
    exclude:
      - '^docs:'
      - '^test:'
      - '^chore:'
      - 'typo'
      - label:ignore-for-release
      - label:duplicate
      - label:question
      - label:invalid
      - label:wontfix
      - author:octocat
      - author:dependabot
  groups:
    - title: ğŸš€ æ–°æ©Ÿèƒ½ / New Features
      regexp: '^.*?feat(\([[:word:]]+\))??!?:.+$'
      order: 0
    - title: ğŸ› ãƒã‚°ä¿®æ­£ / Bug Fixes
      regexp: '^.*?fix(\([[:word:]]+\))??!?:.+$'
      order: 1
    - title: ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ / Documentation
      regexp: '^.*?docs(\([[:word:]]+\))??!?:.+$'
      order: 2
    - title: ğŸ”§ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° / Refactoring
      regexp: '^.*?refactor(\([[:word:]]+\))??!?:.+$'
      order: 3
    - title: âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ / Performance Improvements
      regexp: '^.*?perf(\([[:word:]]+\))??!?:.+$'
      order: 4
    - title: ğŸ§ª ãƒ†ã‚¹ãƒˆ / Tests
      regexp: '^.*?test(\([[:word:]]+\))??!?:.+$'
      order: 5
    - title: ğŸ”¨ ãƒ“ãƒ«ãƒ‰ãƒ»CI/CD / Build & CI/CD
      regexp: '^.*?(build|ci)(\([[:word:]]+\))??!?:.+$'
      order: 6
    - title: ğŸ“¦ ä¾å­˜é–¢ä¿‚ã®æ›´æ–° / Dependency Updates
      regexp: '^.*?deps(\([[:word:]]+\))??!?:.+$'
      order: 7
    - title: ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ / Security
      regexp: '^.*?security(\([[:word:]]+\))??!?:.+$'
      order: 8
    - title: ğŸŒ ãã®ä»–ã®å¤‰æ›´ / Other Changes
      order: 999

# Release configuration
release:
  github:
    owner: otagao
    name: touhou-local-sync
  draft: false
  prerelease: auto
  name_template: "v{{.Version}}"
  header: |
    ## æ±æ–¹Project ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿åŒæœŸãƒ„ãƒ¼ãƒ« v{{.Version}}

    Windowså°‚ç”¨ã®USBãƒ¡ãƒ¢ãƒªã‚’ä½¿ã£ãŸæ±æ–¹Projectã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿åŒæœŸCLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

    ### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

    1. ãŠä½¿ã„ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åˆã£ãŸZIPãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
       - é€šå¸¸ã®Windows PC: `thlocalsync_{{.Version}}_windows_amd64.zip`
       - ARM64ç‰ˆWindows: `thlocalsync_{{.Version}}_windows_arm64.zip`
    2. ZIPã‚’è§£å‡ã—ã€`thlocalsync.exe`ã‚’USBãƒ¡ãƒ¢ãƒªã®`/THLocalSync/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®
    3. ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¾ãŸã¯PowerShellã‹ã‚‰å®Ÿè¡Œ

    ### ä½¿ã„æ–¹

    ```bash
    # ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•æ¤œå‡ºã¨ç™»éŒ²
    thlocalsync.exe detect

    # ç¾åœ¨ã®çŠ¶æ…‹ç¢ºèª
    thlocalsync.exe status all

    # USBã¸ã®ãƒ—ãƒ«ï¼ˆãƒ­ãƒ¼ã‚«ãƒ« â†’ USBï¼‰
    thlocalsync.exe pull all

    # ãƒ­ãƒ¼ã‚«ãƒ«ã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆUSB â†’ ãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
    thlocalsync.exe push all
    ```

    è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã¯ [README.md](https://github.com/otagao/touhou-local-sync/blob/main/README.md) ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
  footer: |
    {{ .Env.RELEASE_FOOTER_CONTENT }}

# Snapshot configuration (for testing)
snapshot:
  version_template: "{{ incpatch .Version }}-next"

# Announce (optional - uncomment if you want notifications)
# announce:
#   discord:
#     enabled: true
#     message_template: 'New release: {{ .ProjectName }} {{ .Tag }} is out! Check it out at {{ .ReleaseURL }}'
